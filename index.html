<!doctype html>
<html class="auto">
  <head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0">

    <title>ink-mde</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Inter:wght@300;400;700&display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
    <style>
      * {
        box-sizing: border-box;
      }

      body, :host {
        --ink-font-family: 'Inter', Helvetica, sans-serif;
        --ink-code-font-family: 'Fira Code', monospace;

        margin: 0;
      }
    </style>
  </head>
  <body>
    <div id="app"></div>
    <!-- <script type="module" src="/examples/web-component.ts"></script> -->
    <script type="module">
      import { ink } from 'ink-mde'
      import { autocomplete } from '/plugins/autocomplete'
      import { headings } from '/plugins/headings'
      import { katex } from '/plugins/katex'

      ink(document.querySelector('#app'), {
        doc: '# Hello, World!',
        interface: {
          appearance: 'light',
          autocomplete: true,
        },
        katex: true,
        plugins: [
          katex(),
          {
            name: 'test-suggestions',
            addCodeMirrorCompletionSources: () => [
              (context) => {
                const match = context.matchBefore(/\[(?:.(?!\[))*?/)

                if (!match) {
                  return null
                }

                return {
                  from: match.from + 1,
                  options: [
                    {
                      apply: 'http://example.test/hello',
                      label: 'Hello',
                      type: 'text',
                    },
                  ],
                }
              },
            ],
          },
        ],
      })
    </script>
  </body>
</html>
